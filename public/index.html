<html>

<head>
    <title>Metal Wars</title>
    <script src="static/js/babylon.js"></script>
    <script src="static/js/babylon.glTF2FileLoader.js"></script>
    <!-- <script src="https://cdn.babylonjs.com/babylon.js"></script> -->
    <script src="static/js/jquery.js"></script>
    <script src="static/js/utils.js"></script>
    <script src="static/js/t.js"></script>
    <script src="static/js/nipplejs.js"></script>
    <link rel="stylesheet" href="static/css/style.css">
    <link rel="stylesheet" href="static/css/w3.css">
    <!-- <script src="static/js/babylon.gui.js"></script> -->
    <!-- <script src="static/js/dat.gui.min.js"></script> -->
    <script src="static/js/babylon.gui.js"></script>

</head>

<body onload="initSystem()" class="parent-body" oncontextmenu="contextMenuFunction()">
    <div id="fps">0</div>
    <canvas id='tc'></canvas>
    <button onclick="makeFullScreen()" class="fullscreenbutton" id="fullscreenbutton"></button>
    <button onclick="showjoystick()" class="showjoystick" id="showjoystick"></button>
    <button onclick="hidejoystick()" class="hidejoystick" id="hidejoystick"></button>
    <button onclick="showControls()" class="showControls" id="showControls">CONTROLS</button>

    <!-- The Modal -->
    <div id="menu-modal" class="modal center">
        <!-- loader -->
        <div class="load-indicator menu-text" id="load-indicator">
            <div class="load-indicator-header" id="load-indicator-header">Metal Wars</div>
            <div class="w3-light-grey">
                <div id="loader-bar" class="w3-container w3-green" style="height:24px;width:0%"></div>
            </div>
            <p id="loader-text">0% loaded...</p>
        </div>

        <!-- home -->
        <div class="menu-home" id="menu-home">
            <div class="menu-header">Choose Your Team</div>

            <div class="home-grid-container">
                <div class="home-grid-header">Selected</div>
                <div class="home-grid-header">Option 1</div>
                <div class="home-grid-header">Option 2</div>

                <div class="bot-selection-container">
                    <img src="static/img/swordsman_icon.png" class="bot-image" id="bot-selection-1" />
                </div>
                <div class="bot-selection-option-container" id="botoption_1-1" name="swordsman">
                    <img src="static/img/swordsman_icon.png" id="botoptionimage_1-1" class="bot-image" />
                    <p class="bot-image-tag" id="bot-image-tag_1-1">&#10004;</p>
                </div>
                <div class="bot-selection-option-container" id="botoption_1-2" name="archer">
                    <img src="static/img/archer_icon.png" id="botoptionimage_1-2" class="bot-image" />
                    <p class="bot-image-tag" style="display: none;" id="bot-image-tag_1-2">&#10004;</p>
                </div>

                <div class="bot-selection-container">
                    <img src="static/img/swordsman_icon.png" class="bot-image" id="bot-selection-2" />
                </div>
                <div class="bot-selection-option-container" id="botoption_2-1" name="swordsman">
                    <img src="static/img/swordsman_icon.png" id="botoptionimage_2-1" class="bot-image" />
                    <p class="bot-image-tag" id="bot-image-tag_2-1">&#10004;</p>
                </div>
                <div class="bot-selection-option-container" id="botoption_2-2" name="archer">
                    <img src="static/img/archer_icon.png" id="botoptionimage_2-2" class="bot-image" />
                    <p class="bot-image-tag" style="display: none;" id="bot-image-tag_2-2">&#10004;</p>
                </div>

                <div class="bot-selection-container">
                    <img src="static/img/swordsman_icon.png" class="bot-image" id="bot-selection-3" />
                </div>
                <div class="bot-selection-option-container" id="botoption_3-1" name="swordsman">
                    <img src="static/img/swordsman_icon.png" id="botoptionimage_3-1" class="bot-image" />
                    <p class="bot-image-tag" id="bot-image-tag_3-1">&#10004;</p>
                </div>
                <div class="bot-selection-option-container" id="botoption_3-2" name="archer">
                    <img src="static/img/archer_icon.png" id="botoptionimage_3-2" class="bot-image" />
                    <p class="bot-image-tag" style="display: none;" id="bot-image-tag_3-2">&#10004;</p>
                </div>

                <div class="bot-selection-container">
                    <img src="static/img/swordsman_icon.png" class="bot-image" id="bot-selection-4" />
                </div>
                <div class="bot-selection-option-container" id="botoption_4-1" name="swordsman">
                    <img src="static/img/swordsman_icon.png" id="botoptionimage_4-1" class="bot-image" />
                    <p class="bot-image-tag" id="bot-image-tag_4-1">&#10004;</p>
                </div>
                <div class="bot-selection-option-container" id="botoption_4-2" name="archer">
                    <img src="static/img/archer_icon.png" id="botoptionimage_4-2" class="bot-image" />
                    <p class="bot-image-tag" style="display: none;" id="bot-image-tag_4-2">&#10004;</p>
                </div>

                <div class="button-home-start" id="button-home-start">start</div>
            </div>
        </div>

        <!-- start countdown for starting the game. -->
        <div class="load-indicator menu-text" id="game-start-countdown">
            <div class="menu-header">Searchin opponents ...</div>
            <div class="load-estimate center">
                <div id="load-estimate" class="center menu-text">Estimated start time 00:00</div>
            </div>
            <div class="load-estimate-time-elapsed center">
                <div id="load-estimate-time-elapsed" class="center menu-text">Time elapsed 00:00</div>
            </div>
        </div>

        <div class="result" id="game-result-container" class="game-result-container">
            <div class="menu-header" id="game-result-header">Draw!</div>
            <strong>Your team performance</strong><br>
            <em id="team-owned-tower-count"></em><br>
            <em id="team-total-kill-count"></em><br>
            <em id="team-total-attack-damage"></em><br>
            <strong>Enemy team performance</strong><br>
            <em id="enemy-owned-tower-count"></em><br>
            <em id="enemy-total-kill-count"></em><br>
            <em id="enemy-total-attack-damage"></em><br>
            <button id="button-result-exit">exit</button>
        </div>
    </div>

    <!-- Modal content -->
    <div class="game-header-menu" id="game-header-menu">
        <table class="game-header-table">
            <tr class="header-clock-row">
                <td class="header-clock-left">TEAM</td>
                <td class="header-clock-cell" id="header-clock-cell">00:00</td>
                <td class="header-clock-right">ENEMY</td>
            </tr>
            <tr class="header-data-row">
                <td class="header-cell-left" id="tower-team">0</td>
                <td class="header-cell-center">TOWERS OWNED</td>
                <td class="header-cell-right" id="tower-enemy">0</td>
            </tr>
            <tr class="header-data-row">
                <td class="header-cell-left" id="kill-team">0</td>
                <td class="header-cell-center">TOTAL KILLS</td>
                <td class="header-cell-right" id="kill-enemy">0</td>
            </tr>
            <tr class="header-data-row">
                <td class="header-cell-left" id="attack-team">0</td>
                <td class="header-cell-center">TOTAL ATTACK</td>
                <td class="header-cell-right" id="attack-enemy">0</td>
            </tr>
        </table>
    </div>
    <!-- Modal content -->


    <script type="text/javascript">
        function contextMenuFunction() {
            //   alert("You right-clicked inside the div!");
            event.preventDefault();
            event.stopPropagation();
            return false;
        };

        function showControls(){
            alert(
                'W - Foreward\t' + 
                'A - Left\n' + 
                'S - Reverse\t' + 
                'D - Right\n\n' +

                'Q - Left\t' + 
                'E - Right\n' + 
                'R - Near\t' + 
                'F - Away\n\n' +
                
                'Click on player button to select troop.\n' + 
                'Click on floor to send the troop to the location.\n' +
                '\nThe aim is to send the right troop, at the right place, at the right time.'
            );
        }

        function showjoystick(){
            $("#hidejoystick").show();
            $("#showjoystick").hide();
            tg.hl.showJoysticks();
        };

        function hidejoystick(){
            $("#hidejoystick").hide();
            $("#showjoystick").show();
            tg.hl.removeJoysticks();
        };
        function makeFullScreen() {
            console.log("makeFullScreen");
            // if (tg.canvas.webkitRequestFullScreen) {
            //     alert('webkit');
            //     tg.canvas.webkitRequestFullScreen();
            //     alert('webkit done');
            // } else {
            //     alert('moz');
            //     tg.canvas.mozRequestFullScreen();
            // }
            alert('webkit');
            if (tg.canvas.requestFullscreen) {
                alert('webkit 1');
                tg.canvas.requestFullscreen();
            } else if (tg.canvas.mozRequestFullScreen) { /* Firefox */
                alert('webkit 2');
                tg.canvas.mozRequestFullScreen();
            } else if (tg.canvas.webkitRequestFullscreen) { /* Chrome, Safari and Opera */
                alert('webkit 3');
                tg.canvas.webkitRequestFullscreen();
            } else if (tg.canvas.msRequestFullscreen) { /* IE/Edge */
                alert('webkit 4');
                tg.canvas.msRequestFullscreen();
            } else{
                alert('webkit 5');
            }
        };
    </script>

    <!-- match footer menu. -->
    <div class="left-joystick" id="left-joystick">
    </div>
    <div class="footerrow" id="footerrow">

        <div class="columnCetral">
            <div class="game-footer-menu" id="game-footer-menu">
                <div class="game-footer-bot-selection" id="game-footer-bot-selection_0"
                    onclick="tg.hl.selectSelfBot(0)">
                    <img src="static/img/lion_icon.png" id="footer-image_0" class="footer-bot-image" />
                </div>
                <div class="game-footer-bot-selection" id="game-footer-bot-selection_1"
                    onclick="tg.hl.selectSelfBot(1)">
                    <img src="static/img/archer_icon.png" id="footer-image_1" class="footer-bot-image" />
                </div>
                <div class="game-footer-bot-selection" id="game-footer-bot-selection_2"
                    onclick="tg.hl.selectSelfBot(2)">
                    <img src="static/img/archer_icon.png" id="footer-image_2" class="footer-bot-image" />
                </div>
                <div class="game-footer-bot-selection" id="game-footer-bot-selection_3"
                    onclick="tg.hl.selectSelfBot(3)">
                    <img src="static/img/archer_icon.png" id="footer-image_3" class="footer-bot-image" />
                </div>
                <div class="game-footer-bot-selection" id="game-footer-bot-selection_4"
                    onclick="tg.hl.selectSelfBot(4)">
                    <img src="static/img/archer_icon.png" id="footer-image_4" class="footer-bot-image" />
                </div>
            </div>
        </div>

    </div>

    <div class="right-joystick" id="right-joystick">
    </div>
</body>

</html>